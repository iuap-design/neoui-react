@use 'sass:math';

@import '../../wui-core/scss/minxin-mixins';

$picker-panel-body-height: 229px;
$picker-input-height: 28px;
$picker-input-padding-left: 4px;
$border: calc(var(--#{$wui-prefix}-base-input-border-width) * 2);

// ? 涉及math,color等sass函数运算时，无法使用var变量
$arrow-size: 10px;

@mixin placeholder($color: $base-input-placeholder-color) {

  // Firefox
  &::-moz-placeholder {
    opacity: 1; // Override Firefox's unusual default opacity; see https://github.com/twbs/bootstrap/pull/11526
  }

  &::placeholder {
    color: $color;
    font-size: var(--#{$wui-prefix}-input-placeholder-font-size);
  }

  &:placeholder-shown {
    text-overflow: ellipsis;
  }
}

@mixin size($height, $padding: 3px, $border: $border) {
  // todo: form error样式会覆盖height/line-height
  // $border: 2px;
  // $padding: $padding - 1px;

  // height: $height;
  // line-height: $height;
  padding-top: $padding;
  padding-bottom: $padding;

  .#{$picker-prefix}-input>input,
  .#{$picker-prefix}-range-separator,
  .#{$picker-prefix}-suffix,
  .#{$picker-prefix}-clear {
    height: calc($height - $border - 2 * $padding);
    line-height: calc($height - $border - 2 * $padding);
  }
}

.#{$picker-prefix} {
  $suffix-width: 16px;
  $padding-right: 8px;

  display: inline-flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  width: 100%;
  // height: $picker-input-height; // 显式声明height，避免缩放时浏览器计算非28px问题
  margin: 0;
  /*!rtl:ignore*/
  padding: 0 $padding-right 0 calc(8px - $picker-input-padding-left); // QDJCJS-22915确保左侧间距与其他组件保持一致，均为8px
  line-height: 1.5;
  border: var(--#{$wui-prefix}-base-input-border-width) var(--#{$wui-prefix}-base-input-border-style) $base-input-border-color;
  border-radius: var(--#{$wui-prefix}-base-input-border-radius);
  list-style: none;
  cursor: pointer;
  color: $base-input-color;
  font-size: 14px;
  background: $picker-input-bg-color;
  transition: border 0.3s, box-shadow 0.3s;
  i.uf {
    padding: 0;
    &.uf-close-c {
      border-radius: 100%;
      background-color: #fff;
    }
  }
  &-xs {
    $height: $form-control-xs-height;
    @include size($height, 1px);
  }

  &-sm {
    $height: $form-control-sm-height;
    @include size($height);
  }

  &-md {
    $height: $form-control-md-height;
    @include size($height);
  }

  &-nm {
    $height: $form-control-nm-height;
    @include size($height);
  }

  &-lg {
    $height: $form-control-lg-height;
    @include size($height);
  }
  
  /*!rtl:begin:ignore*/
  &-rtl {
    /*!rtl:ignore*/
    direction: rtl;
  }
  /*!rtl:end:ignore*/

  &-focused:not(&-disabled),
  &:hover:not(&-disabled) {
    border-right-width: var(--#{$wui-prefix}-base-input-border-width) !important;
    outline: 0;
  }

  &:hover:not(&-disabled) {
    border-color: $base-input-border-color-hover;
    .#{$picker-prefix}-clear {
      opacity: 1;
    }
  }

  // 处理focus与hover权重
  #{&}#{&}-focused:not(&-disabled) {
    border-color: $base-input-border-color-focus;
    &:not(.#{$picker-prefix}-border-bottom) {
      box-shadow: 0 0 0 2px rgba(#0091ff,0.2);
    }
    .#{$prefix-cls}input:focus {
      box-shadow: none;
    }
  }

  @include required-style();

  &-disabled {
    cursor: not-allowed;

    &.#{$picker-prefix} {
      background-color: $picker-input-bg-disabled;
      border-color: $base-input-border-color-disabled;

      .#{$picker-prefix}-suffix {
        color: $base-input-suffix-icon-color-disabled;

        .uf:hover {
          color: $base-input-suffix-icon-color-disabled;
        }
        &:hover {
          .uf:before {
            color: $base-input-suffix-icon-color-disabled;
          }
        }
      }
    }

    .#{$picker-prefix}-input>input {
      color: $base-input-color-disabled;
      background-color: $picker-input-bg-disabled;
      box-shadow: inset 0 0 0 1000px $picker-input-bg-disabled;
    }

    .#{$picker-prefix}-range-separator {
      color: $base-input-color-disabled;
    }
  }

  &-panels {
    display: inline-flex;
  }

  &-panel {
    display: inline-block;
    position: relative;
    vertical-align: top;
    outline: none;
    background: $picker-bg-color;

    &-focused {
      border-color: $base-input-border-color-focus;
      box-shadow: 0 0 0 2px rgba(#0091ff,0.2);
    }

    &-rtl {
      /*!rtl:ignore*/
      direction: rtl;
      .#{$picker-prefix}-header-super-prev-btn,
      .#{$picker-prefix}-header-prev-btn,
      .#{$picker-prefix}-header-next-btn,
      .#{$picker-prefix}-header-super-next-btn {
        transform: rotate(180deg);
      }
    }

    &-unlinked:nth-child(2) {
      border-left: 1px solid #dbdbdb;
    }
  }



  // ===================== Shared Panel =====================
  &-decade-panel,
  &-year-panel,
  &-halfYear-panel,
  &-quarter-panel,
  &-month-panel,
  &-week-panel,
  &-date-panel,
  &-time-panel {
    display: flex;
    flex-direction: column;
    min-width: 280px; // 修复多语翻译文本过长时溢出或换行问题

    table {
      width: 100%;
      text-align: center;
      border-collapse: collapse;
    }

    &-cell {
      &-selected>&-inner {
        color: $base-item-text-color-active;
        background: $picker-cell-bg-color-selected;

        &:hover {
          background: $picker-cell-bg-color-hover;
        }
      }
    }
  }

  // Header
  &-header {
    display: flex;
    padding: 0 5px;
    height: var(--#{$picker-prefix}-size-height-header-panel);
    line-height: var(--#{$picker-prefix}-size-height-header-panel);
    font-size: var(--#{$picker-prefix}-font-size-header);
    font-weight: var(--#{$picker-prefix}-font-weight-header);
    text-align: center;
    user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
    border-bottom: 1px solid $base-input-border-color-disabled;

    &-select-icon,
    &-today-btn,
    &-super-prev-btn,
    &-prev-btn,
    &-next-btn,
    &-super-next-btn {
      display: inline-block;
      margin: auto;
      padding: 0 5px;
      width: 24px;
      height: 24px;
      line-height: 24px;
      text-align: center;
      border: none;
      cursor: pointer;
      font-size: var(--#{$picker-prefix}-font-size-panel);
      color: var--#{$picker-prefix}-color-icon-panel;
      background-color: $picker-bg-color;

      &:hover {
        color: var(--#{$picker-prefix}-color-icon-panel-hover);
        background-color: #f7f7f7;
        border-radius: 4px;
      }

      .#{$wui-prefix}-icon {
        font-size: 12px;
        padding: 0;
      }
    }

    // 面板不关联时header增加·今天·快捷按钮
    &-today-btn {
      margin: auto 4px;
      width: auto;
      line-height: 18px;
      font-size: 12px;
      color: #666;
      border: 1px solid #dfdfdf;
      border-radius: 4px;
    }

    >* {
      flex: none;
    }

    &-view {
      display: inline-flex;
      flex: auto;
      justify-content: center;
      color: var(--#{$picker-prefix}-color-text-header);
      position: relative;
      z-index: 999;

      >button {
        height: 33px;
        padding: 0 5px;
        border: 0;
        color: var(--#{$picker-prefix}-color-text-header);
        background-color: $picker-bg-color;
      }
    }
  }

  // Body
  &-body {
    padding: 9px 10px 10px;
    color: $font-color-base; // 不起作用了
  }

  &-content th {
    line-height: 18px;
    padding: 6px 0;
    width: 36px;
    text-align: center;
    font-weight: var(--#{$picker-prefix}-font-weight-week);
    font-size: var(--#{$picker-prefix}-font-size-week);
    color: var(--#{$picker-prefix}-color-text-week);
  }

  &-cell {
    padding: 0;
    color: var(--#{$picker-prefix}-color-text-content-disabled);

    &-disabled {
      opacity: 0.2;
      background-color: transparent;
      cursor: not-allowed;
    }

    &-disabled &-inner {
      pointer-events: none;
    }

    &-inner {
      display: block;
      padding: 0;
      margin: 3px auto;
      height: $picker-cell-size;
      line-height: $picker-cell-size;
      text-align: center;
      outline: none;
      border: none;
      border-radius: var(--#{$picker-prefix}-border-radius-cell);
      cursor: pointer;
      background: transparent;
      transition: background 0.3s, border 0.3s;

      &:hover {
        background: var(--#{$picker-prefix}-color-bg-cell-hover);
      }
    }

    &-in-view:not(#{&}-disabled) {
      color: var(--#{$picker-prefix}-color-text-content);

      &:hover {
        color: var(--#{$picker-prefix}-color-text-content-hover);
      }
    }

    &#{&}-in-range#{&}-in-view:not(#{&}-range-start, #{&}-range-end, #{&}-today) #{&}-inner,
    &#{&}-range-hover#{&}-in-view:not(#{&}-range-start, #{&}-range-end, #{&}-today) #{&}-inner {
      width: 100%;
      border-radius: 0;
      background: $picker-cell-bg-color-hover;
    }

    &-in-view#{&}-range-hover-start,
    &-in-view#{&}-range-hover-end,
    &-in-view#{&}-range-hover {
      position: relative;

      &::after {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        z-index: 0;
        height: $picker-cell-size;
        width: 100%;
        transform: translateY(-50%);
        transition: all 0.3s;
        content: '';
        pointer-events: none;
      }
    }

    &-in-view#{&}-today>&-inner {
      position: relative;
      width: var(--#{$picker-prefix}-size-width-cell);
      border: 1px solid var(--#{$picker-prefix}-color-bg-cell-focus);
      border-radius: var(--#{$picker-prefix}-border-radius-cell);
      line-height: unset; // QDJCJS-7961：有边框时上下居中与无边框不同
      color: $base-item-text-color-active;
      background: transparent;

      &:before {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 1;
        border-radius: 2px;
        content: '';
      }
    }

    &-in-view#{&}-range-start>&-inner,
    &-in-view#{&}-range-end>&-inner,
    &-in-view#{&}-selected>&-inner {
      background: var(--#{$picker-prefix}-color-bg-cell-selected);
      color: $picker-button-text-color;
    }
  }

  &-header-extra {
    padding: 0 10px;
    border-bottom: 1px solid $base-input-border-color-disabled;
  }

  &-footer,
  &-picker-footer {
    position: relative;
    width: min-content;
    min-width: 100%;
    padding: 0 10px;
    line-height: var(--#{$picker-prefix}-size-height-footer);
    border-top: 1px solid $base-input-border-color-disabled;
    background: $picker-bg-color;

    .#{$picker-prefix}-ok button {
      padding: 0 7px;
      height: 24px;
      line-height: 1.5;
      border: 1px solid $picker-button-bg-color;
      border-radius: 4px;
      outline: none;
      color: $picker-button-text-color;
      background: $picker-button-bg-color;

      &:disabled,
      &[disabled] {
        opacity: 0.5;
        border-color: transparent;
        pointer-events: none;
      }
    }
  }

  &-footer {
    text-align: center;
  }

  &-today-btn {
    display: inline-block;
    text-align: center;
    color: $brand-info;

    &:hover {
      cursor: pointer;
      color: $brand-info-active;
      font-size: var(--#{$picker-prefix}-font-size-textbtn-footer);
    }

    &#{&}-disabled {
      cursor: not-allowed;
      color: $base-input-color-disabled;
    }
  }

  @each $mode in decade,
  year,
  halfYear,
  quarter,
  month {
    &-#{$mode}-panel~&-footer &-now-btn {
      display: none;
    }
  }

  &-ranges {
    margin: 0;
    padding: 0;
    overflow: hidden;
    list-style: none;

    li {
      display: inline-block;

      .#{$picker-prefix}-now-btn {
        display: inline-block;
        text-align: center;
        color: $brand-info;

        &:hover {
          cursor: pointer;
          color: $brand-info-active;
        }
      }
    }

    .#{$picker-prefix}-preset {
      float: left; // 预设区间按钮左对齐
      margin-right: 8px;
      min-width: 40px;

      span {
        display: inline-block;
        box-sizing: border-box;
        padding: 1px 8px;
        line-height: 20px;
        border: 1px solid $picker-border-color;
        border-radius: 24px;
        white-space: nowrap;
        opacity: 1;
        transition: all 0.3s;
        color: $font-color-base;
        cursor: pointer;

        &:hover {
          border-color: transparent;
          color: $base-item-text-color-active;
          background: $picker-cell-bg-color-hover;
        }
      }
    }

    .#{$picker-prefix}-preset.#{$picker-prefix}-preset-active span {
      border-color: $base-item-text-color-active;
      color: $base-item-text-color-active;
    }
  }

  &-ok {
    float: right;
  }

  // ================== Decade Panel ==================
  &-decade-panel {
    .#{$picker-prefix}-cell-inner {
      min-width: 75px;
    }
  }

  // ================== Year & Month Panel ==================
  &-year-panel,
  &-month-panel {
    .#{$picker-prefix}-cell-inner {
      margin: 8px auto 12px;
    }
  }

  // ================== HalfYear Panel ==================
  &-halfYear-panel {
    .#{$picker-prefix}-cell-inner {
      min-width: 96px;
      padding: 0 8px; // ue需求
    }
  }

  // ================== Quarter Panel ==================
  &-quarter-panel {
    .#{$picker-prefix}-cell {
      min-width: 48px;

      &-inner {
        margin: 3px auto;
      }

      &-selected,
      &-range-start,
      &-range-end {
        .#{$picker-prefix}-cell-inner {
          width: 100%;
          padding: 0 8px; // ue需求
        }
      }
    }
  }

  // ====================== Week Panel ======================
  &-week-panel {
    &-row {
      &:hover {
        .#{$picker-prefix}-cell {
          background-color: $picker-cell-bg-color-hover;

          &-week {
            font-weight: 500;
            color: $base-item-text-color-active;
          }
        }

        .#{$picker-prefix}-cell:has(+.#{$picker-prefix}-cell-disabled) {
          background-color: transparent;

          &.#{$picker-prefix}-cell-week {
            color: $base-input-color-disabled;
          }
        }
      }

      &-range-start,
      &-range-end,
      &-selected {
        .#{$picker-prefix}-cell-in-view .#{$picker-prefix}-cell-inner {
          width: auto;
          border: none;
          border-radius: 0;
          background: $base-item-text-color-active;
          color: $picker-button-text-color;
        }
      }

      &-in-range .#{$picker-prefix}-cell-in-view:not(.#{$picker-prefix}-cell-today) .#{$picker-prefix}-cell-inner {
        width: 100%;
        border-radius: 0;
        background: $picker-cell-bg-color-hover;
      }

      &-range-start,
      &-range-end,
      &-selected,
      &-in-range {
        .#{$picker-prefix}-cell-in-view {

          &:nth-child(2),
          &.#{$picker-prefix}-cell-start {
            .#{$picker-prefix}-cell-inner {
              border-top-left-radius: var(--#{$picker-prefix}-border-radius-cell);
              border-bottom-left-radius: var(--#{$picker-prefix}-border-radius-cell);
            }
          }

          &:last-child,
          &.#{$picker-prefix}-cell-end {
            .#{$picker-prefix}-cell-inner {
              border-top-right-radius: var(--#{$picker-prefix}-border-radius-cell);
              border-bottom-right-radius: var(--#{$picker-prefix}-border-radius-cell);
            }
          }
        }
      }

      &-range-start,
      &-range-end,
      &-selected {
        .#{$picker-prefix}-cell-week:has(~.#{$picker-prefix}-cell-in-view) {
          font-weight: 500;
          color: $base-item-text-color-active;
        }
      }
    }

    .#{$picker-prefix}-cell-week {
      padding: 0 10px;
      border: none;
      color: $base-input-color-disabled;
    }

    .#{$picker-prefix}-cell:not(.#{$picker-prefix}-cell-disabled):hover>.#{$picker-prefix}-cell-inner {
      background: transparent;
      color: $base-item-text-color-active;
    }

    .#{$picker-prefix}-cell-week:has(+.#{$picker-prefix}-cell-disabled)>.#{$picker-prefix}-cell-inner:hover {
      background: transparent;
      color: $base-input-color-disabled;
      cursor: not-allowed;
    }
  }

  // ====================== Date Panel ======================
  &-date-panel {
    .#{$picker-prefix}-cell-inner {
      width: var(--#{$picker-prefix}-size-width-cell);
    }
  }
  .#{$picker-prefix}-rtl  &-time-panel{
    /*!rtl:ignore*/
    direction: ltr;
  }

  // ====================== Time Panel ======================
  &-time-panel {
    min-width: auto;
    /*!rtl:ignore*/
    direction: ltr;
    .#{$picker-prefix}-content {
      display: flex;
      gap: 8px;
      padding: 9px 10px 10px;
      max-height: $picker-panel-body-height;

      @media screen and (-ms-high-contrast: active),
      (-ms-high-contrast: none) {
        height: $picker-panel-body-height; // QDJCJS-9650，修复IE11下时间面板超长问题；flex + max-height无效；
      }
    }

    &-column {
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex: none;
      width: 48px;
      margin: 0;
      padding: 0 0 calc($picker-panel-body-height - $picker-cell-size - 19px) 0;
      text-align: left;
      direction:ltr;
      list-style: none;
      overflow: hidden;
      transition: background 0.3s;
      @include set-scrollbar-style(5px, 5px);

      &.#{$picker-prefix}-time-panel-12hours {
        padding: 0; // 修复am/pm列出现滚动条问题；
      }

      &:nth-child(4) {
        padding-bottom: 0;
      }

      &-active {
        background: #fff4f2;
      }

      &:hover {
        overflow-y: auto;
      }

      >li {
        padding: 0;
        margin: 0;
        width: 48px;
        cursor: pointer;

        &.#{$picker-prefix}-time-panel-cell-selected>.#{$picker-prefix}-time-panel-cell-inner {
          color: $base-item-text-color-active;
        }

        &.#{$picker-prefix}-time-panel-cell-disabled {
          cursor: not-allowed;

          >.#{$picker-prefix}-time-panel-cell-inner {
            pointer-events: none;
            color: $base-input-color-disabled;
          }
        }

        .#{$picker-prefix}-time-panel-cell-inner {
          color: $font-color-base;
          display: block;
          width: 100%;
          height: $picker-cell-size;
          line-height: $picker-cell-size;
          border-radius: 4px;
          text-align: center;

          &:hover {
            color: $base-item-text-color-active;
          }

          /*!rtl:begin:ignore*/
          .#{$picker-prefix}-panel-rtl & {
            padding: 0 12px 0 0;
            text-align: right;
          }
          /*!rtl:end:ignore*/
        }
      }
    }
  }

  // ====================== Date Time =======================
  &-datetime-panel {
    display: flex;

    .#{$picker-prefix}-time-panel {
      border-left: 1px solid $base-input-border-color-disabled;
    }

    .#{$picker-prefix}-date-panel,
    .#{$picker-prefix}-time-panel {
      transition: opacity 0.3s;
    }

    // Keyboard
    &-active {

      .#{$picker-prefix}-date-panel,
      .#{$picker-prefix}-time-panel {
        opacity: 0.3;

        &-active {
          opacity: 1;
        }
      }
    }
  }

  // ======================== Input =========================
  &-input {
    position: relative;
    display: inline-flex;
    align-items: center;
    width: 100%;

    /*!rtl:begin:ignore*/
    .#{$picker-prefix}-rtl & {
      /*!rtl:ignore*/
      text-align: right;
    }
    /*!rtl:end:ignore*/

    >input {
      width: 100%;
      margin: 0;
      padding: 0 0 0 $picker-input-padding-left;
      // line-height: 1.5;
      border: 0;
      border-radius: 2px;
      outline: 0;
      caret-color: var(--#{$wui-prefix}-base-input-caret-color);
      font-weight: var(--#{$wui-prefix}-base-input-font-weight);
      cursor: text;
      font-size: var(--#{$picker-prefix}-input-font-size);
      color: $base-input-color;
      background-image: none;
      transition: all 0.3s;
      background-color: transparent; // #QDJCJS-7689
      box-shadow: inset 0 0 0 0px transparent; // #QDJCJS-7689

      @include placeholder();

      &::-ms-clear {
        // QDJCJS-9736，解决IE多余清除X符号
        display: none;
      }
    }

    >input[disabled] {
      color: $base-input-color-disabled;
      cursor: not-allowed;
    }

    >input[readonly] {
      user-select: none;
    }

    &-placeholder {
      >input {
        color: $base-input-placeholder-color;
      }
    }

    .#{$picker-prefix}-suffix {
      align-self: center;
      width: 16px;
      color: $base-input-suffix-icon-color;

      .uf {
        font-size: $suffix-icon-font-size;
      }

      :active {
        color: var(--#{$wui-prefix}-input-suffix-icon-color-active);
      }

      :hover {
        &::before {
          color: $base-input-suffix-icon-color-hover;
          background-color: var(--#{$wui-prefix}-input-suffix-icon-background-color-hover);
        }
      }
    }
  }

  &#{&}-border-bottom {
    background-color: transparent;
  }

  &-border-bottom,
  &-border-bottom#{&}-disabled {
    @include borderTransparent();
    border-radius: 0;

    &.#{$picker-prefix} {

      &:hover,
      &.#{$picker-prefix}-focused {
        @include borderTransparent();
        border-radius: 0;
      }
    }

    input {
      background-color: transparent;
      box-shadow: none;
    }
  }

  &-border-none,
  &-border-none#{&}-disabled  {
    @include borderTransparent(true, true, true, true);
    border-radius: 0;

    &.#{$picker-prefix} {

      &:hover,
      &.#{$picker-prefix}-focused {
        @include borderTransparent(true, true, true, true);
        border-radius: 0;
      }
    }
  }


  @each $align in $align-arr {
    &-align-#{$align} input {
      text-align: $align;
    }
  }

  &-range &-clear {
    display: inline-table;
    right: $suffix-width + $padding-right + 4px; // 清空图标位置
  }

  &-clear {
    position: absolute;
    top: 50%;
    right: $suffix-width + 4px; // 清空图标位置
    width: 16px;
    transform: translateY(-50%);
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s, color 0.3s;
    color: $clear-icon-base-color;
    font-size: $clear-icon-font-size;

    &:hover {
      opacity: 1;
      color: $clear-icon-hover-color;
    }


    .#{$picker-prefix}-rtl & {
      /*!rtl:ignore*/
      left: $suffix-width + 4px; // 清空图标位置
      /*!rtl:ignore*/
      right:auto;
    }


    &-btn::after {
      content: '×';
    }
  }

  // ======================= Dropdown =======================
  &-dropdown {
    position: absolute;
    z-index: $zindex-picker;
    outline: none;
    line-height: 1.5715;
    list-style: none;
    border: none;
    border-radius: var(--#{$picker-prefix}-border-radius-panel);
    font-size: var(--#{$picker-prefix}-font-size-content);
    font-weight: var(--#{$picker-prefix}-font-weight-content);
    text-align: left;
    &-range {
      padding-top: 5px;
    }

    &-hidden {
      display: none;
    }

    // Panel
    &-placement-topLeft,
    &-placement-topRight {
      .#{$picker-prefix}-range-arrow {
        bottom: 0;
        transform: rotate(135deg);
      }
    }

    &-placement-bottomLeft,
    &-placement-bottomRight {
      .#{$picker-prefix}-range-arrow {
        top: 0;
        transform: rotate(-45deg);
      }
    }

    .#{$picker-prefix}-range-arrow {
      position: absolute;
      width: $arrow-size;
      height: $arrow-size;
      // z-index: 1; // 没必要，箭头应该被面板遮挡
      left: $arrow-size;
      margin-left: 10px;
      transition: all 0.3s;

      /*!rtl:begin:ignore*/
      .#{$picker-prefix}-dropdown-rtl & {
        right: $arrow-size;
        left: auto;
        margin-left: 0;
        margin-right: 10px;
      }
      /*!rtl:end:ignore*/

      &::before,
      &::after {
        content: '';
        position: absolute;
        box-sizing: border-box;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);

        /*!rtl:begin:ignore*/
        .#{$picker-prefix}-dropdown-rtl & {
          right: 50%;
          left: auto;
          transform: translate(50%, -50%);
        }
        /*!rtl:end:ignore*/
      }

      &::before {
        width: $arrow-size;
        height: $arrow-size;
        border: math.div($arrow-size, 2) solid $brand-info;
        border-color: $brand-info $brand-info transparent transparent;
      }

      &::after {
        width: calc($arrow-size - 2px);
        height: calc($arrow-size - 2px);
        border: math.div($arrow-size, 2) solid $brand-info;
        border-color: $picker-bg-color $picker-bg-color transparent transparent;
      }
    }

    &-placement-topRight,
    &-placement-bottomRight {
      .#{$picker-prefix}-range-arrow {
        margin-left: 315px;
      }
    }

    .#{$picker-prefix}-date-panel,
    .#{$picker-prefix}-week-panel {
      .#{$picker-prefix}-header-select {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.16);
      }
    }

    .#{$picker-prefix}-month-panel,
    .#{$picker-prefix}-quarter-panel,
    .#{$picker-prefix}-halfYear-panel,
    .#{$picker-prefix}-year-panel {
      .#{$picker-prefix}-cell {
        padding: 3px 0;
      }
      .#{$picker-prefix}-header-select {
        &-year {
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.16);
        }
      }
    }

    .#{$picker-prefix}-header-select-box {
      background: transparent;
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 1000;

      .#{$picker-prefix}-header-select {
        position: absolute;
        top: 34px;
        width: 180px;
        height: 200px;
        left: 50%;
        margin-left: -90px;
        display: flex;
        justify-content: center;
        z-index: 1000;

        &-year {
          height: 100%;
          overflow: hidden;
          background: #fff;
          width: 90px;
          border: 1px solid #f1f1f1;
          border-top-left-radius: 4px;
          border-bottom-left-radius: 4px;
          position: relative;
          @include set-scrollbar-style(5px, 5px);

          ul li {
            width: 90px;
          }

          ul li:hover {
            cursor: pointer;
            background: #f0f0f0;
          }

          &-active {
            background: #e9f0fa;
          }
        }

        &-year:hover,
        &-month:hover {
          overflow-y: auto;
        }

        &-month {
          height: 100%;
          overflow: hidden;
          background: #fff;
          width: 90px;
          border: 1px solid #f1f1f1;
          border-left: none;
          border-top-right-radius: 4px;
          border-bottom-right-radius: 4px;
          @include set-scrollbar-style(5px, 5px);

          ul li {
            width: 90px;
          }

          ul li:hover {
            cursor: pointer;
            background: #f0f0f0;
          }

          &-active {
            background: #e9f0fa;
          }
        }
      }
    }

    .#{$picker-prefix}-header-select-icon {
      margin: auto 0;

      .uf-gridcaretdown {
        font-size: 12px;
        color: #999;
      }

      .uf-gridcaretarrowup {
        font-size: 12px;
        color: #505766;
      }
    }
  }

  // ========================================================
  // =                     Range Picker                     =
  // ========================================================
  &-range {
    display: inline-flex;
    position: relative;
    // height: $picker-input-height; // 显式声明height，避免缩放时浏览器计算非28px问题

    &-wrapper {
      display: flex;
      min-width: auto !important;
    }

    @media screen and (-ms-high-contrast: active),
    (-ms-high-contrast: none) {
      .#{$picker-prefix}-input {
        width: calc(50% - 22px); // QDJCJS-9650，修复IE11下宽度计算错误导致小日历位置错误问题
      }
    }

    .#{$picker-prefix}-clear {
      &:hover {
        color: $clear-icon-hover-color;
      }
    }

    .#{$picker-prefix}-suffix {
      width: $suffix-width;
      color: $base-input-suffix-icon-color;

      .uf {
        font-size: $suffix-icon-font-size;

        &:hover {
          color: $base-input-suffix-icon-color-hover;
          background-color: var(--#{$wui-prefix}-input-suffix-icon-background-color-hover);
        }
      }
    }

    &.#{$picker-prefix}-focused {
      .#{$picker-prefix}-input-active>input {
        color: $base-input-placeholder-color;
        background-color: var(--#{$wui-prefix}-input-active-bg-color);
      }
    }

    &-separator {
      padding: 0 5px;
    }
  }

  &-panel-container {
    display: inline-block;
    vertical-align: top;
    border: var(--#{$picker-prefix}-border-width-panel) var(--#{$picker-prefix}-border-style-panel) var(--#{$picker-prefix}-color-border-panel);
    border-radius: var(--#{$picker-prefix}-border-radius-panel);
    // overflow: hidden;
    // box-shadow: 0px 4px 8px -2px rgba(9, 30, 66, 0.25), 0px 0px 1px 0px rgba(9, 30, 66, 0.31);
    box-shadow: var(--#{$picker-prefix}-box-shadow-panel);
    transition: margin 0.3s;
    background: #fff;
  }
}

// ========================================================
// =                      animation                       =
// ========================================================

.#{$picker-prefix}-slide-up-enter {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  transform-origin: 0 0;
  display: block !important;
  opacity: 0;
  animation-timing-function: cubic-bezier(0.08, 0.82, 0.17, 1);
  animation-play-state: paused;
}

.#{$picker-prefix}-slide-up-appear {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  transform-origin: 0 0;
  display: block !important;
  opacity: 0;
  animation-timing-function: cubic-bezier(0.08, 0.82, 0.17, 1);
  animation-play-state: paused;
}

.#{$picker-prefix}-slide-up-leave {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  transform-origin: 0 0;
  display: block !important;
  opacity: 1;
  animation-timing-function: cubic-bezier(0.6, 0.04, 0.98, 0.34);
  animation-play-state: paused;
}

.#{$picker-prefix}-slide-up-enter.#{$picker-prefix}-slide-up-enter-active.#{$picker-prefix}-placement-bottomLeft,
.#{$picker-prefix}-slide-up-enter.#{$picker-prefix}-slide-up-enter-active.#{$picker-prefix}-placement-bottomRight,
.#{$picker-prefix}-slide-up-appear.#{$picker-prefix}-slide-up-appear-active.#{$picker-prefix}-placement-bottomLeft,
.#{$picker-prefix}-slide-up-appear.#{$picker-prefix}-slide-up-appear-active.#{$picker-prefix}-placement-bottomRight {
  animation-name: rcDropdownSlideUpIn;
  animation-play-state: running;
}

.#{$picker-prefix}-slide-up-enter.#{$picker-prefix}-slide-up-enter-active.#{$picker-prefix}-placement-topLeft,
.#{$picker-prefix}-slide-up-enter.#{$picker-prefix}-slide-up-enter-active.#{$picker-prefix}-placement-topRight,
.#{$picker-prefix}-slide-up-appear.#{$picker-prefix}-slide-up-appear-active.#{$picker-prefix}-placement-topLeft,
.#{$picker-prefix}-slide-up-appear.#{$picker-prefix}-slide-up-appear-active.#{$picker-prefix}-placement-topRight {
  animation-name: rcDropdownSlideDownIn;
  animation-play-state: running;
}

.#{$picker-prefix}-slide-up-leave.#{$picker-prefix}-slide-up-leave-active.#{$picker-prefix}-placement-bottomLeft,
.#{$picker-prefix}-slide-up-leave.#{$picker-prefix}-slide-up-leave-active.#{$picker-prefix}-placement-bottomRight {
  animation-name: rcDropdownSlideUpOut;
  animation-play-state: running;
}

.#{$picker-prefix}-slide-up-leave.#{$picker-prefix}-slide-up-leave-active.#{$picker-prefix}-placement-topLeft,
.#{$picker-prefix}-slide-up-leave.#{$picker-prefix}-slide-up-leave-active.#{$picker-prefix}-placement-topRight {
  animation-name: rcDropdownSlideDownOut;
  animation-play-state: running;
}

@keyframes rcDropdownSlideUpIn {
  0% {
    opacity: 0;
    transform-origin: 0% 0%;
    transform: scaleY(0);
  }

  100% {
    opacity: 1;
    transform-origin: 0% 0%;
    transform: scaleY(1);
  }
}

@keyframes rcDropdownSlideUpOut {
  0% {
    opacity: 1;
    transform-origin: 0% 0%;
    transform: scaleY(1);
  }

  100% {
    opacity: 0;
    transform-origin: 0% 0%;
    transform: scaleY(0);
  }
}

@keyframes rcDropdownSlideDownIn {
  0% {
    opacity: 0;
    transform-origin: 100% 100%;
    transform: scaleY(0);
  }

  100% {
    opacity: 1;
    transform-origin: 100% 100%;
    transform: scaleY(1);
  }
}

@keyframes rcDropdownSlideDownOut {
  0% {
    opacity: 1;
    transform-origin: 100% 100%;
    transform: scaleY(1);
  }

  100% {
    opacity: 0;
    transform-origin: 100% 100%;
    transform: scaleY(0);
  }
}
